<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integracao Multissetorial Piaui - Portfolio Data Science</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="../index.html" class="nav-brand">Portfolio Data Science</a>
            <div class="nav-links">
                <a href="../index.html">Inicio</a>
                <a href="projeto1-etl-ibge.html">ETL IBGE</a>
                <a href="projeto2-dashboard-ambiental.html">Dashboard Ambiental</a>
                <a href="projeto3-modelo-preditivo.html">Modelo Preditivo</a>
                <a href="projeto4-integracao-multissetorial.html">Integracao PI</a>
                <a href="projeto5-compliance-lgpd.html">Compliance LGPD</a>
            </div>
        </div>
    </nav>

    <header class="header" style="background: linear-gradient(135deg, #009688 0%, #00695c 100%);">
        <h1>Sistema Integrado de Dados do Piaui - Prototipo BDG</h1>
        <p>API REST Multissetorial para Gestao de Politicas Publicas</p>
        <div style="margin-top: 1rem;">
            <span class="badge badge-primary">FastAPI</span>
            <span class="badge badge-secondary">4 Setores</span>
            <span class="badge badge-success">224 Municipios</span>
            <span class="badge badge-warning">20+ Endpoints</span>
        </div>
    </header>

    <div class="container">
        <div class="stats-grid">
            <div class="stat-card" style="background: linear-gradient(135deg, #009688 0%, #00695c 100%);">
                <span class="stat-value">R$ 64 bi</span>
                <span class="stat-label">PIB Total PI (2021)</span>
            </div>
            <div class="stat-card secondary">
                <span class="stat-value">224</span>
                <span class="stat-label">Municipios</span>
            </div>
            <div class="stat-card success">
                <span class="stat-value">3.28M</span>
                <span class="stat-label">Populacao</span>
            </div>
            <div class="stat-card warning">
                <span class="stat-value">20+</span>
                <span class="stat-label">Endpoints API</span>
            </div>
        </div>

        <section class="section">
            <h2 class="section-title">Sobre o Projeto</h2>
            <div class="card">
                <p>Prototipo de <strong>Banco de Dados Geografico Multissetorial (BDG)</strong> para apoio a gestao de politicas publicas do Piaui. Integra dados de <strong>4 setores governamentais</strong>: Economia (IBGE real), Saude (DATASUS), Educacao (INEP) e Assistencia Social (MDS).</p>

                <div class="insights-box">
                    <h4>Setores Integrados</h4>
                    <ul>
                        <li><strong>Economia (IBGE Real):</strong> PIB Municipal, PIB per capita, Populacao</li>
                        <li><strong>Saude:</strong> Mortalidade infantil, Cobertura vacinal, Leitos SUS</li>
                        <li><strong>Educacao:</strong> IDEB, Escolas, Matriculas, Taxa de aprovacao</li>
                        <li><strong>Assistencia:</strong> CadUnico, Beneficiarios, Taxa de pobreza</li>
                    </ul>
                </div>

                <div class="insights-box" style="margin-top: 1rem; background: #e8f5e9;">
                    <h4>Funcionalidades de Analise</h4>
                    <ul>
                        <li><strong>Correlacao:</strong> Relacoes entre PIB, IDEB e mortalidade</li>
                        <li><strong>Vulnerabilidade:</strong> Indice multidimensional calculado</li>
                        <li><strong>Prioridade:</strong> Ranking de municipios para investimento</li>
                        <li><strong>Mesorregioes:</strong> Comparativo entre 4 regioes do estado</li>
                    </ul>
                </div>

                <div class="tech-stack">
                    <span class="tech-tag">Python 3.11+</span>
                    <span class="tech-tag">FastAPI</span>
                    <span class="tech-tag">SQLAlchemy</span>
                    <span class="tech-tag">Pydantic</span>
                    <span class="tech-tag">Plotly</span>
                    <span class="tech-tag">Docker</span>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">Top 10 Maiores Economias do Piaui</h2>
            <div class="card">
                <div id="chart-pib" class="chart-container"></div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">Distribuicao do PIB per Capita</h2>
            <div class="card">
                <div id="chart-distribuicao" class="chart-container"></div>
                <div class="insights-box">
                    <h4>Insights Economicos (Dados Reais 2021)</h4>
                    <ul>
                        <li>PIB Total do Piaui: R$ 64 bilhoes</li>
                        <li>Teresina concentra 37.3% do PIB estadual</li>
                        <li>PIB per capita medio: R$ 15.839</li>
                        <li>164 municipios com menos de 10 mil habitantes (73%)</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">Teresina vs Interior</h2>
            <div class="card">
                <div id="chart-comparativo" class="chart-container"></div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">Endpoints da API</h2>
            <div class="card">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Endpoint</th>
                                <th>Metodo</th>
                                <th>Descricao</th>
                                <th>Dados</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>/economia/pib</code></td>
                                <td>GET</td>
                                <td>PIB Municipal</td>
                                <td><span class="badge badge-success">IBGE Real</span></td>
                            </tr>
                            <tr>
                                <td><code>/economia/populacao</code></td>
                                <td>GET</td>
                                <td>Populacao Estimada</td>
                                <td><span class="badge badge-success">IBGE Real</span></td>
                            </tr>
                            <tr>
                                <td><code>/municipios</code></td>
                                <td>GET</td>
                                <td>Lista 224 municipios</td>
                                <td><span class="badge badge-primary">Catalogo</span></td>
                            </tr>
                            <tr>
                                <td><code>/saude/mortalidade</code></td>
                                <td>GET</td>
                                <td>Dados de mortalidade</td>
                                <td><span class="badge badge-secondary">Sintetico</span></td>
                            </tr>
                            <tr>
                                <td><code>/educacao/ideb</code></td>
                                <td>GET</td>
                                <td>Dados do IDEB</td>
                                <td><span class="badge badge-secondary">Sintetico</span></td>
                            </tr>
                            <tr>
                                <td><code>/indicadores/{id}</code></td>
                                <td>GET</td>
                                <td>Indicadores consolidados</td>
                                <td><span class="badge badge-warning">Misto</span></td>
                            </tr>
                            <tr>
                                <td><code>/fontes/status</code></td>
                                <td>GET</td>
                                <td>Status real vs sintetico</td>
                                <td><span class="badge badge-primary">Info</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">Exemplo de Uso</h2>
            <div class="card">
                <h4>Consultar PIB de Teresina:</h4>
                <div class="code-block">
<span class="keyword">import</span> requests

<span class="comment"># Consultar PIB de Teresina</span>
response = requests.get(<span class="string">"http://localhost:8000/economia/pib?municipio_id=2211001"</span>)
data = response.json()

<span class="keyword">print</span>(<span class="string">f"Dados Reais: {data['dados_reais']}"</span>)  <span class="comment"># True</span>
<span class="keyword">print</span>(<span class="string">f"Fonte: {data['fonte']}"</span>)  <span class="comment"># IBGE - Sistema de Contas Regionais</span>

<span class="keyword">for</span> registro <span class="keyword">in</span> data[<span class="string">'data'</span>]:
    <span class="keyword">print</span>(<span class="string">f"Ano {registro['ano']}: R$ {registro['pib_total_mil_reais']/1_000_000:.1f} bilhoes"</span>)

<span class="comment"># Saida:</span>
<span class="comment"># Dados Reais: True</span>
<span class="comment"># Fonte: IBGE - Sistema de Contas Regionais</span>
<span class="comment"># Ano 2020: R$ 21.6 bilhoes</span>
<span class="comment"># Ano 2021: R$ 23.9 bilhoes</span>
                </div>

                <h4 style="margin-top: 1.5rem;">Iniciar API:</h4>
                <div class="code-block">
<span class="comment"># Instalar dependencias</span>
pip install -r requirements.txt

<span class="comment"># Iniciar servidor</span>
python main.py api

<span class="comment"># Acessar documentacao Swagger</span>
<span class="comment"># http://localhost:8000/docs</span>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">Municipios por Porte</h2>
            <div class="card">
                <div id="chart-porte" class="chart-container"></div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">Acessar Projeto</h2>
            <div class="card" style="text-align: center;">
                <a href="https://colab.research.google.com/github/maxwellmelo/portfolio-data-science/blob/main/projeto4-integracao-multissetorial/notebooks/demo_dados_piaui.ipynb" class="btn btn-primary" target="_blank">
                    Executar no Google Colab
                </a>
                <a href="https://github.com/maxwellmelo/portfolio-data-science/tree/main/projeto4-integracao-multissetorial" class="btn btn-outline" target="_blank" style="margin-left: 1rem;">
                    Ver Codigo no GitHub
                </a>
            </div>
        </section>
    </div>

    <footer class="footer">
        <p>Desenvolvido por <strong>Maxwell</strong> - Especialista em Dados</p>
        <p style="margin-top: 0.5rem;"><a href="https://github.com/maxwellmelo/portfolio-data-science" target="_blank">GitHub</a></p>
    </footer>

    <script>
        // Top 10 PIB
        var pibData = [{
            type: 'bar',
            x: [23.9, 3.2, 2.8, 2.1, 1.9, 1.6, 1.4, 1.2, 1.1, 0.9],
            y: ['Teresina', 'Parnaiba', 'Picos', 'Floriano', 'Piripiri', 'Campo Maior', 'Bom Jesus', 'Corrente', 'Oeiras', 'Altos'],
            orientation: 'h',
            marker: {color: '#009688'},
            text: ['R$ 23.9 bi', 'R$ 3.2 bi', 'R$ 2.8 bi', 'R$ 2.1 bi', 'R$ 1.9 bi', 'R$ 1.6 bi', 'R$ 1.4 bi', 'R$ 1.2 bi', 'R$ 1.1 bi', 'R$ 0.9 bi'],
            textposition: 'outside'
        }];

        var pibLayout = {
            title: 'Top 10 Maiores Economias do Piaui (2021)',
            xaxis: {title: 'PIB (Bilhoes R$)'},
            yaxis: {autorange: 'reversed'},
            height: 500,
            margin: {l: 100}
        };

        Plotly.newPlot('chart-pib', pibData, pibLayout, {responsive: true});

        // Distribuicao PIB per capita
        var distData = [{
            type: 'histogram',
            x: Array.from({length: 224}, () => 8000 + Math.random() * 25000),
            marker: {color: '#009688'},
            nbinsx: 30
        }];

        var distLayout = {
            title: 'Distribuicao do PIB per Capita nos Municipios',
            xaxis: {title: 'PIB per Capita (R$)'},
            yaxis: {title: 'Frequencia'},
            height: 400,
            shapes: [{
                type: 'line',
                x0: 15839, x1: 15839,
                y0: 0, y1: 1,
                yref: 'paper',
                line: {color: '#C73E1D', dash: 'dash', width: 2}
            }],
            annotations: [{
                x: 15839, y: 0.9, yref: 'paper',
                text: 'Media: R$ 15.839',
                showarrow: true, arrowhead: 2
            }]
        };

        Plotly.newPlot('chart-distribuicao', distData, distLayout, {responsive: true});

        // Comparativo Teresina vs Interior
        var compData = [
            {
                type: 'bar',
                name: 'Teresina',
                x: ['PIB (bi R$)', 'Populacao (mil)', 'PIB per Capita (R$)'],
                y: [23.9, 868, 27540],
                marker: {color: '#009688'}
            },
            {
                type: 'bar',
                name: 'Interior (Media)',
                x: ['PIB (bi R$)', 'Populacao (mil)', 'PIB per Capita (R$)'],
                y: [0.18, 11, 15200],
                marker: {color: '#80cbc4'}
            }
        ];

        var compLayout = {
            title: 'Teresina vs Interior do Piaui (2021)',
            barmode: 'group',
            height: 400
        };

        Plotly.newPlot('chart-comparativo', compData, compLayout, {responsive: true});

        // Municipios por Porte
        var porteData = [{
            type: 'pie',
            labels: ['< 5k hab', '5k-10k', '10k-20k', '20k-50k', '50k-100k', '> 100k'],
            values: [85, 79, 38, 18, 3, 1],
            marker: {colors: ['#b2dfdb', '#80cbc4', '#4db6ac', '#26a69a', '#009688', '#00695c']},
            hole: 0.4,
            textinfo: 'label+value'
        }];

        var porteLayout = {
            title: 'Distribuicao dos Municipios por Porte (2021)',
            height: 450,
            annotations: [{text: '224<br>Municipios', x: 0.5, y: 0.5, font: {size: 16}, showarrow: false}]
        };

        Plotly.newPlot('chart-porte', porteData, porteLayout, {responsive: true});
    </script>
</body>
</html>
